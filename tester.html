<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">

	<title>Tester</title>
</head>

<body>

	<body>
        <div id="old_score"></div>
        <div id="new_score"></div>

        <script type="text/javascript">
            function readScore(game, callback) {
                fetch(encodeURI("http://brianpiltin.com:4111/high_scores/" + game))
                .then(res => res.json())
                .then(json => callback && callback(json));
            }

            function writeScore(game, name, score, callback) {
                fetch(encodeURI("http://brianpiltin.com:4111/high_scores/" + game + "/update/" + name + "/score/" + score))
                .then(res => res.json())
                .then(json => callback && callback(json));
            }

            readScore("hornball", function (res) {
                console.log(res);
                document.getElementById("old_score").innerHTML = JSON.stringify(res);
                let oldScore = parseInt(res.score);
                writeScore("hornball", "New Person", oldScore++, function (res) {
                    console.log(res);
                    document.getElementById("new_score").innerHTML = JSON.stringify(res);
                });
            });
            
        </script>
	</body>

</html>